<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EonGenesis.id - Kursus Sempoa dengan Teknologi AR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --nude: #E8D6C0;
            --brown: #8B5A2B;
            --dark-brown: #4A2C2A;
            --light-brown: #C4A586;
            --earth: #A86F4C;
            --cream: #F8F4E9;
            --premium: #FFD700;
        }
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--cream);
            color: var(--dark-brown);
        }
        
        .brand-font {
            font-family: 'Playfair Display', serif;
        }
        
        .navbar {
            background-color: var(--dark-brown);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--nude) !important;
            display: flex;
            align-items: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
        
        .logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--nude) 0%, var(--light-brown) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--nude);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        .logo-text {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            color: var(--dark-brown);
            font-size: 18px;
        }
        
        .logo-alternative {
            width: 40px;
            height: 40px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--nude);
        }
        
        .hero-section {
            background: linear-gradient(135deg, var(--dark-brown) 0%, var(--earth) 100%);
            color: var(--cream);
            padding: 100px 0;
            margin-bottom: 50px;
        }
        
        .card {
            border-radius: 10px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(90, 70, 50, 0.15);
            transition: transform 0.3s;
            margin-bottom: 20px;
            border: none;
            background-color: var(--cream);
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .btn-primary {
            background-color: var(--brown);
            border-color: var(--brown);
        }
        
        .btn-primary:hover {
            background-color: var(--dark-brown);
            border-color: var(--dark-brown);
        }
        
        .btn-outline-primary {
            color: var(--brown);
            border-color: var(--brown);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--brown);
            color: white;
        }
        
        .section-title {
            position: relative;
            padding-bottom: 15px;
            margin-bottom: 30px;
            color: var(--dark-brown);
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 3px;
            background-color: var(--brown);
        }
        
        .ar-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--earth);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--brown);
            margin-bottom: 15px;
        }
        
        footer {
            background-color: var(--dark-brown);
            color: var(--nude);
            padding: 40px 0;
        }
        
        .dashboard-card {
            height: 100%;
        }
        
        .nav-pills .nav-link.active {
            background-color: var(--brown);
        }
        
        .nav-pills .nav-link {
            color: var(--dark-brown);
        }
        
        .progress-bar {
            background-color: var(--brown);
        }
        
        .trial-counter {
            background-color: var(--light-brown);
            color: var(--dark-brown);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .trial-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--dark-brown);
        }
        
        .product-card {
            border-left: 4px solid var(--brown);
        }
        
        .logo-upload-section {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(90, 70, 50, 0.15);
            margin-bottom: 30px;
        }
        
        .logo-preview {
            width: 150px;
            height: 150px;
            border: 2px dashed var(--brown);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            overflow: hidden;
        }
        
        .logo-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .logo-option {
            width: 80px;
            height: 80px;
            border: 2px solid var(--light-brown);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .logo-option:hover {
            transform: scale(1.05);
            border-color: var(--brown);
        }
        
        .price-original {
            text-decoration: line-through;
            color: #999;
            font-size: 0.9rem;
        }
        
        .price-discount {
            color: #e74a3b;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .discount-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #e74a3b;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .login-bar {
            background-color: var(--light-brown);
            padding: 8px 0;
            text-align: right;
        }
        
        .login-form {
            display: inline-flex;
            gap: 10px;
            align-items: center;
        }
        
        .login-input {
            padding: 5px 10px;
            border: 1px solid var(--brown);
            border-radius: 4px;
            font-size: 14px;
        }
        
        .ar-container {
            width: 100%;
            height: 400px;
            border: 2px solid var(--brown);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .ar-placeholder {
            font-size: 3rem;
            color: var(--brown);
            margin-bottom: 15px;
        }
        
        .trial-modal .modal-content {
            background-color: var(--cream);
            border-radius: 15px;
        }
        
        .trial-modal .modal-header {
            border-bottom: 2px solid var(--brown);
            background-color: var(--dark-brown);
            color: var(--nude);
            border-radius: 15px 15px 0 0;
        }
        
        .trial-modal .btn-close {
            color: var(--nude);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--dark-brown);
        }
        
        .user-avatar {
            width: 30px;
            height: 30px;
            background-color: var(--brown);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .login-notice {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .login-notice i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .premium-badge {
            background-color: var(--premium);
            color: #856404;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-left: 8px;
        }
        
        .payment-modal .modal-content {
            border-radius: 15px;
        }
        
        .payment-option {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-option:hover {
            border-color: var(--brown);
            background-color: #f9f9f9;
        }
        
        .payment-option.selected {
            border-color: var(--brown);
            background-color: rgba(139, 90, 43, 0.1);
        }
        
        .access-badge {
            background-color: var(--brown);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .paid-badge {
            background-color: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .locked-content {
            filter: blur(5px);
            pointer-events: none;
            position: relative;
        }
        
        .locked-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }
        
        .locked-icon {
            font-size: 2rem;
            color: white;
        }
        
        .qr-code {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            display: block;
        }
        
        .admin-reset {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .affiliate-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .zoom-class {
            background-color: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .material-access {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
        }
        
        .material-list {
            list-style-type: none;
            padding: 0;
        }
        
        .material-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .material-list li:last-child {
            border-bottom: none;
        }
        
        .trial-promo {
            background-color: #e8f4fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }
        
        .material-item {
            margin-bottom: 15px;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .material-locked {
            position: relative;
        }
        
        .material-locked::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            color: white;
            font-weight: bold;
        }
        
        .material-locked::before {
            content: '🔒 Kunci - Belum Dibeli';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            color: white;
            font-weight: bold;
            text-align: center;
        }
        
        .admin-section {
            display: none;
        }
        
        .user-section {
            display: block;
        }
        
        .admin-menu {
            background-color: var(--dark-brown);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .admin-menu-item {
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        .admin-menu-item:hover, .admin-menu-item.active {
            background-color: var(--brown);
        }
        
        .upload-area {
            border: 2px dashed var(--brown);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background-color: #f9f9f9;
        }
        
        .material-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
        }
        
        .affiliate-badge {
            background-color: #17a2b8;
            color: white;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        
        .voucher-section {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        @media (max-width: 768px) {
            .hero-section {
                padding: 60px 0;
            }
            
            .logo-options {
                flex-wrap: wrap;
            }
            
            .login-form {
                flex-direction: column;
                gap: 5px;
            }
            
            .login-bar {
                text-align: center;
            }
            
            .qr-code {
                width: 150px;
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Bar -->
    <div class="login-bar">
        <div class="container">
            <div id="loginFormContainer">
                <form class="login-form" id="loginForm">
                    <input type="text" class="login-input" id="loginUsername" placeholder="Username" required>
                    <input type="password" class="login-input" id="loginPassword" placeholder="Password" required>
                    <button type="submit" class="btn btn-sm btn-primary">Login</button>
                    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#registerModal">Daftar</button>
                </form>
            </div>
            <div id="userInfoContainer" class="user-info" style="display: none;">
                <div class="user-avatar" id="userAvatar"></div>
                <span id="userName"></span>
                <span id="userRole" class="premium-badge" style="display: none;">Admin</span>
                <span id="userStatus" class="premium-badge" style="display: none;">Premium</span>
                <span id="userAffiliate" class="affiliate-badge" style="display: none;">Affiliate</span>
                <button class="btn btn-sm btn-outline-primary ms-2" id="logoutBtn">Logout</button>
            </div>
        </div>
    </div>

    <!-- Modal Pendaftaran -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="registerModalLabel">Daftar Akun Baru</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="registerForm">
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" class="form-control" id="username" required>
                            <div class="form-text text-danger" id="usernameError" style="display: none;">Username sudah terdaftar</div>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        <div class="mb-3">
                            <label for="whatsapp" class="form-label">Nomor WhatsApp (contoh: 0812345678901)</label>
                            <input type="tel" class="form-control" id="whatsapp" required maxlength="13" pattern="08[0-9]{9,11}">
                            <div class="form-text text-danger" id="whatsappError" style="display: none;">Nomor WhatsApp sudah terdaftar</div>
                            <div class="form-text">Pastikan nomor WhatsApp aktif dan benar (13 digit, format: 08xxxxxxxxxx)</div>
                        </div>
                        <div class="mb-3">
                            <label for="affiliateCode" class="form-label">Kode Affiliate (opsional)</label>
                            <input type="text" class="form-control" id="affiliateCode">
                            <div class="form-text text-danger" id="affiliateError" style="display: none;">Kode affiliate tidak valid</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="submitRegister">Daftar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Free Trial -->
    <div class="modal fade trial-modal" id="trialModal" tabindex="-1" aria-labelledby="trialModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="trialModalLabel">Akses Free Trial</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="trialLoginNotice" class="login-notice">
                        <i class="fas fa-exclamation-circle"></i>
                        <div>Harap anda Login terlebih dahulu untuk mengakses Free Trial</div>
                    </div>
                    
                    <div id="trialLimitNotice" class="login-notice" style="display: none; background-color: #f8d7da; color: #721c24; border-color: #f5c6cb;">
                        <i class="fas fa-times-circle"></i>
                        <div>Anda telah mencapai batas maksimal Free Trial (2x per akun)</div>
                    </div>
                    
                    <div id="trialContent" style="display: none;">
                        <div class="text-center mb-4">
                            <i class="fas fa-vr-cardboard fa-4x mb-3" style="color: var(--brown);"></i>
                            <h4>Free Trial AR Sempoa</h4>
                            <p>Klik tombol di bawah untuk mengakses free trial kami</p>
                            <p class="text-muted">Sisa percobaan: <span id="trialCount">2</span>/2</p>
                        </div>
                        <div class="d-grid gap-2">
                            <a href="https://eongenesis-id.github.io/EONGENESIS/" target="_blank" class="btn btn-primary btn-lg" id="trialLink">
                                <i class="fas fa-external-link-alt me-2"></i> Akses Free Trial
                            </a>
                        </div>
                        
                        <!-- Ajakan Beli Setelah Trial Habis -->
                        <div id="trialPromo" class="trial-promo" style="display: none;">
                            <h5>Free Trial Anda telah habis!</h5>
                            <p>Nikmati akses penuh ke teknologi AR Sempoa dengan membeli paket akses lengkap.</p>
                            <button class="btn btn-success mt-2" id="buyAfterTrial" data-product="Akses Link AR" data-price="30000">
                                <i class="fas fa-shopping-cart me-2"></i> Beli Akses AR - Rp 30.000
                            </button>
                        </div>
                        
                        <div class="mt-4">
                            <h5>Jika mengalami masalah:</h5>
                            <ol>
                                <li>Pastikan koneksi internet Anda stabil</li>
                                <li>Coba buka link di browser yang berbeda</li>
                                <li>Hubungi kami jika masalah tetap berlanjut</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Pembayaran -->
    <div class="modal fade payment-modal" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paymentModalLabel">Pembayaran</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Detail Pesanan</h6>
                            <div class="card">
                                <div class="card-body">
                                    <h6 id="paymentProductName">Nama Produk</h6>
                                    <p class="mb-1">Harga: <span id="paymentProductPrice">Rp 0</span></p>
                                    <p class="mb-0" id="voucherApplied" style="display: none;">Diskon: <span class="text-success">-10%</span></p>
                                    <p class="mb-0">Status: <span class="text-success">Belum dibayar</span></p>
                                </div>
                            </div>
                            
                            <!-- Section Voucher -->
                            <div class="voucher-section">
                                <h6>Gunakan Voucher</h6>
                                <div class="input-group mb-2">
                                    <input type="text" class="form-control" id="voucherCode" placeholder="Masukkan kode voucher">
                                    <button class="btn btn-outline-secondary" type="button" id="applyVoucher">Terapkan</button>
                                </div>
                                <div class="form-text" id="voucherMessage"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6>Metode Pembayaran</h6>
                            <div class="payment-option selected" data-method="transfer">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="paymentMethod" id="transferMethod" checked>
                                    <label class="form-check-label" for="transferMethod">
                                        Transfer Bank
                                    </label>
                                </div>
                                <div class="mt-2" id="bankTransferDetails">
                                    <p class="mb-1"><strong>BCA: 1750999073 (Gabriella)</strong></p>
                                    <p class="mb-0 text-muted">Harap transfer tepat sampai 3 digit terakhir</p>
                                </div>
                            </div>
                            <div class="payment-option" data-method="qris">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="paymentMethod" id="qrisMethod">
                                    <label class="form-check-label" for="qrisMethod">
                                        QRIS (All Payment)
                                    </label>
                                </div>
                                <div class="mt-2 text-center" id="qrisCode" style="display: none;">
                                    <!-- QRIS yang dapat digunakan untuk pembayaran real -->
                                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=00020101021126680014ID.CO.QRIS.WWW01189360091403105779980203UKE5204581253033605802ID5914EONGENESIS.ID6007JAKARTA61051253062070703A016304C0D4" alt="QR Code QRIS" class="qr-code">
                                    <p class="mt-2">Scan QR code di atas untuk pembayaran via QRIS</p>
                                    <p class="text-muted">Dana akan diteruskan ke BCA: 1750999073 (Gabriella)</p>
                                    <p class="text-muted">Kode Merchant: EONGENESIS.ID</p>
                                </div>
                            </div>
                            
                            <div class="mt-3">
                                <label for="proofPayment" class="form-label">Upload Bukti Pembayaran</label>
                                <input type="file" class="form-control" id="proofPayment" required>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="confirmPayment">Konfirmasi Pembayaran</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Reset Button (Hanya terlihat untuk admin) -->
    <div class="admin-reset" id="adminResetButton" style="display: none;">
        <button class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#adminModal">
            <i class="fas fa-trash"></i> Reset Data
        </button>
    </div>

    <!-- Modal Admin -->
    <div class="modal fade" id="adminModal" tabindex="-1" aria-labelledby="adminModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="adminModalLabel">Admin Panel</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="adminPassword" class="form-label">Password Admin</label>
                        <input type="password" class="form-control" id="adminPassword">
                    </div>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i> PERINGATAN: Tindakan ini akan menghapus semua data pengguna yang terdaftar. Tindakan tidak dapat dibatalkan.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmReset">Reset Data</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand brand-font" href="#">
                <!-- Opsi 1: Logo dengan CSS -->
                <div class="logo-container">
                    <div class="logo">
                        <span class="logo-text">E</span>
                    </div>
                </div>
                EonGenesis.id
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-bs-target="home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="profile">Profil</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="products">Produk</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="catalog">Katalog</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="affiliate">Affiliate</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://wa.me/62895342517290" target="_blank">
                            <i class="fab fa-whatsapp me-1"></i> WhatsApp
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- User Section -->
    <div class="user-section">
        <!-- Main Content Sections -->
        <div class="container my-5">
            <!-- Home Section -->
            <section id="home-section" class="content-section">
                <!-- Hero Section -->
                <div class="hero-section rounded">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-lg-6">
                                <h1 class="display-4 fw-bold brand-font">Kursus Sempoa Modern dengan Teknologi AR</h1>
                                <p class="lead">Tingkatkan kemampuan berhitung dengan metode sempoa yang dipadukan dengan teknologi Augmented Reality untuk pengalaman belajar yang interaktif.</p>
                                <button class="btn btn-light btn-lg mt-3" data-bs-toggle="modal" data-bs-target="#trialModal">Coba Free Trial <i class="fas fa-arrow-right ms-2"></i></button>
                            </div>
                            <div class="col-lg-6 d-none d-lg-block">
                                <img src="https://images.unsplash.com/photo-1585432959449-b1c9c8cc49ac?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" class="img-fluid rounded shadow" alt="Sempoa AR">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Features Section -->
                <div class="py-5">
                    <div class="container">
                        <h2 class="section-title text-center">Mengapa Memilih EonGenesis.id?</h2>
                        <div class="row">
                            <div class="col-md-4 text-center mb-4">
                                <div class="feature-icon">
                                    <i class="fas fa-vr-cardboard"></i>
                                </div>
                                <h4>Teknologi AR</h4>
                                <p>Belajar sempoa dengan Augmented Reality untuk pengalaman interaktif yang menyenangkan.</p>
                            </div>
                            <div class="col-md-4 text-center mb-4">
                                <div class="feature-icon">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <h4>Instruktur Berpengalaman</h4>
                                <p>Diajar oleh instruktur profesional yang telah bersertifikat dan berpengalaman dalam mengajar sempoa.</p>
                            </div>
                            <div class="col-md-4 text-center mb-4">
                                <div class="feature-icon">
                                    <i class="fas fa-certificate"></i>
                                </div>
                                <h4>Sertifikat Resmi</h4>
                                <p>Dapatkan sertifikat resmi setelah menyelesaikan kursus yang dapat meningkatkan nilai akademis.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Zoom Class Info -->
                <div class="zoom-class mt-5">
                    <h3 class="text-center"><i class="fas fa-video me-2"></i>Kelas Zoom Gratis</h3>
                    <p class="text-center">Setiap Hari Jumat pukul 18.30 WIB</p>
                    <div class="text-center mt-3">
                        <p>Bergabunglah dengan kelas Zoom gratis kami untuk belajar sempoa bersama instruktur profesional.</p>
                        <a href="#" class="btn btn-primary" id="zoomLink">Bergabung Kelas Zoom</a>
                    </div>
                </div>
            </section>

            <!-- Profile Section -->
            <section id="profile-section" class="content-section" style="display: none;">
                <h2 class="section-title">Profil Pengguna</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body text-center">
                                <div class="user-avatar mx-auto mb-3" style="width: 80px; height: 80px; font-size: 2rem;" id="profileAvatar"></div>
                                <h5 id="profileName">Nama Pengguna</h5>
                                <p id="profileWhatsapp">WhatsApp: -</p>
                                <div id="profileStatusBadge" class="premium-badge mb-3" style="display: none;">Premium</div>
                                <div id="profileAffiliateBadge" class="affiliate-badge mb-3" style="display: none;">Affiliate</div>
                            </div>
                        </div>
                        
                        <!-- Info Affiliate -->
                        <div class="card mt-4" id="affiliateInfoCard" style="display: none;">
                            <div class="card-body">
                                <h5 class="card-title">Info Affiliate</h5>
                                <p class="card-text">Kode Affiliate Anda:</p>
                                <h4 class="text-center" id="affiliateCodeValue"></h4>
                                <p class="card-text">Salin kode di atas dan bagikan kepada teman Anda. Anda akan mendapatkan komisi 10% dari setiap pembelian yang menggunakan kode affiliate Anda.</p>
                                <button class="btn btn-sm btn-outline-primary w-100" id="copyAffiliateCode">Salin Kode</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-body">
                                <h5>Produk yang Dimiliki</h5>
                                <div id="userProducts" class="mt-3">
                                    <p class="text-muted">Anda belum membeli produk apapun.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Riwayat Affiliate -->
                        <div class="card mt-4" id="affiliateHistoryCard" style="display: none;">
                            <div class="card-body">
                                <h5 class="card-title">Riwayat Affiliate</h5>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Pengguna</th>
                                                <th>Tanggal</th>
                                                <th>Produk</th>
                                                <th>Komisi</th>
                                            </tr>
                                        </thead>
                                        <tbody id="affiliateHistory">
                                            <!-- Data affiliate akan dimuat di sini -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Products Section -->
            <section id="products-section" class="content-section" style="display: none;">
                <h2 class="section-title">Produk Kami</h2>
                
                <div class="row">
                    <!-- Produk 1: Beginner Sempoa -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card product-card">
                            <div class="discount-badge">DISKON 10%</div>
                            <div class="card-body">
                                <h5 class="card-title">Beginner Sempoa</h5>
                                <p class="card-text">Paket pemula untuk belajar dasar-dasar sempoa dengan metode yang mudah dipahami.</p>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="price-original">Rp 150.000</span>
                                        <span class="price-discount">Rp 135.000</span>
                                    </div>
                                    <span class="access-badge" data-product="beginner">Materi Terkunci</span>
                                </div>
                                <button class="btn btn-primary w-100 buy-btn" data-product="Beginner Sempoa" data-price="135000" data-product-key="beginner">
                                    Beli Sekarang
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Produk 2: Intermediate Sempoa -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card product-card">
                            <div class="discount-badge">DISKON 10%</div>
                            <div class="card-body">
                                <h5 class="card-title">Intermediate Sempoa</h5>
                                <p class="card-text">Tingkat lanjutan untuk menguasai teknik sempoa yang lebih kompleks.</p>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="price-original">Rp 200.000</span>
                                        <span class="price-discount">Rp 180.000</span>
                                    </div>
                                    <span class="access-badge" data-product="intermediate">Materi Terkunci</span>
                                </div>
                                <button class="btn btn-primary w-100 buy-btn" data-product="Intermediate Sempoa" data-price="180000" data-product-key="intermediate">
                                    Beli Sekarang
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Produk 3: Advanced Sempoa -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card product-card">
                            <div class="discount-badge">DISKON 10%</div>
                            <div class="card-body">
                                <h5 class="card-title">Advanced Sempoa</h5>
                                <p class="card-text">Tingkat mahir untuk menjadi ahli dalam penggunaan sempoa dan perhitungan kompleks.</p>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="price-original">Rp 250.000</span>
                                        <span class="price-discount">Rp 225.000</span>
                                    </div>
                                    <span class="access-badge" data-product="advanced">Materi Terkunci</span>
                                </div>
                                <button class="btn btn-primary w-100 buy-btn" data-product="Advanced Sempoa" data-price="225000" data-product-key="advanced">
                                    Beli Sekarang
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Produk 4: Akses Link AR -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card product-card">
                            <div class="card-body">
                                <h5 class="card-title">Akses Link AR</h5>
                                <p class="card-text">Akses khusus ke teknologi Augmented Reality untuk pembelajaran sempoa interaktif.</p>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="price-discount">Rp 30.000</span>
                                    </div>
                                    <span class="access-badge" data-product="ar">Materi Terkunci</span>
                                </div>
                                <button class="btn btn-primary w-100 buy-btn" data-product="Akses Link AR" data-price="30000" data-product-key="ar">
                                    Beli Sekarang
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Produk 5: Materi PDF -->
                    <div class="col-md-6 col-lg-4">
                        <div class="card product-card">
                            <div class="card-body">
                                <h5 class="card-title">Materi PDF</h5>
                                <p class="card-text">Materi pembelajaran dalam format PDF yang dapat diunduh dan dipelajari offline.</p>
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="price-discount">Rp 50.000</span>
                                    </div>
                                    <span class="access-badge" data-product="pdf">Materi Terkunci</span>
                                </div>
                                <button class="btn btn-primary w-100 buy-btn" data-product="Materi PDF" data-price="50000" data-product-key="pdf">
                                    Beli Sekarang
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Catalog Section -->
            <section id="catalog-section" class="content-section" style="display: none;">
                <h2 class="section-title">Katalog Materi</h2>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i> Hanya materi dari produk yang telah Anda beli yang dapat diakses.
                </div>
                
                <!-- Materi Beginner Sempoa -->
                <div class="material-item" id="material-beginner">
                    <h4>Materi Beginner Sempoa</h4>
                    <p>Materi pembelajaran untuk tingkat pemula yang mencakup dasar-dasar penggunaan sempoa.</p>
                    <div class="material-access">
                        <h6>Daftar Materi:</h6>
                        <ul class="material-list">
                            <li><i class="fas fa-file-pdf me-2"></i> Pengenalan Sempoa - Dasar</li>
                            <li><i class="fas fa-file-pdf me-2"></i> Penjumlahan Sederhana</li>
                            <li><i class="fas fa-file-pdf me-2"></i> Pengurangan Sederhana</li>
                            <li><i class="fas fa-video me-2"></i> Video Tutorial Level 1</li>
                        </ul>
                        <a href="#" class="btn btn-sm btn-success access-material-btn" data-product="beginner">Akses Materi</a>
                    </div>
                </div>
                
                <!-- Materi Intermediate Sempoa -->
                <div class="material-item material-locked" id="material-intermediate">
                    <h4>Materi Intermediate Sempoa</h4>
                    <p>Materi pembelajaran untuk tingkat menengah dengan teknik yang lebih kompleks.</p>
                </div>
                
                <!-- Materi Advanced Sempoa -->
                <div class="material-item material-locked" id="material-advanced">
                    <h4>Materi Advanced Sempoa</h4>
                    <p>Materi pembelajaran untuk tingkat mahir dengan teknik perhitungan kompleks.</p>
                </div>
                
                <!-- Materi AR -->
                <div class="material-item material-locked" id="material-ar">
                    <h4>Materi Augmented Reality</h4>
                    <p>Akses ke teknologi AR untuk pembelajaran sempoa yang interaktif dan menyenangkan.</p>
                </div>
                
                <!-- Materi PDF -->
                <div class="material-item material-locked" id="material-pdf">
                    <h4>Materi PDF</h4>
                    <p>Kumpulan materi PDF yang dapat diunduh untuk belajar offline.</p>
                </div>
            </section>

            <!-- Affiliate Section -->
            <section id="affiliate-section" class="content-section" style="display: none;">
                <h2 class="section-title">Program Affiliate</h2>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i> Dapatkan komisi 10% dari setiap pembelian yang menggunakan kode affiliate Anda.
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Kode Affiliate Anda</h5>
                                <div class="text-center py-4">
                                    <h2 id="userAffiliateCode" class="text-primary">-</h2>
                                    <button class="btn btn-outline-primary mt-2" id="copyAffiliateBtn">
                                        <i class="fas fa-copy me-2"></i> Salin Kode
                                    </button>
                                </div>
                                <div class="mt-3">
                                    <h6>Cara menggunakan:</h6>
                                    <ol>
                                        <li>Salin kode affiliate Anda</li>
                                        <li>Bagikan kepada calon pengguna</li>
                                        <li>Calon pengguna memasukkan kode saat mendaftar</li>
                                        <li>Anda mendapatkan komisi 10% dari setiap pembelian mereka</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Statistik Affiliate</h5>
                                <div class="text-center py-3">
                                    <div class="row">
                                        <div class="col-6">
                                            <h3 id="affiliateCount">0</h3>
                                            <p>Pengguna Terdaftar</p>
                                        </div>
                                        <div class="col-6">
                                            <h3 id="affiliateEarnings">Rp 0</h3>
                                            <p>Total Komisi</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <h6 class="mt-4">Riwayat Komisi</h6>
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>Pengguna</th>
                                                <th>Tanggal</th>
                                                <th>Komisi</th>
                                            </tr>
                                        </thead>
                                        <tbody id="affiliateStats">
                                            <!-- Data affiliate akan dimuat di sini -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-body">
                        <h5 class="card-title">Bagikan Kode Affiliate</h5>
                        <p>Gunakan link berikut untuk mengajak orang lain bergabung:</p>
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="affiliateLink" readonly>
                            <button class="btn btn-outline-secondary" type="button" id="copyAffiliateLink">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        
                        <div class="mt-3">
                            <h6>Bagikan melalui:</h6>
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-primary btn-sm">
                                    <i class="fab fa-whatsapp me-1"></i> WhatsApp
                                </button>
                                <button class="btn btn-outline-primary btn-sm">
                                    <i class="fab fa-facebook me-1"></i> Facebook
                                </button>
                                <button class="btn btn-outline-primary btn-sm">
                                    <i class="fab fa-instagram me-1"></i> Instagram
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5 class="brand-font">EonGenesis.id</h5>
                    <p>Kursus Sempoa Modern dengan Teknologi Augmented Reality untuk pengalaman belajar yang interaktif dan menyenangkan.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Kontak Kami</h5>
                    <p><i class="fab fa-whatsapp me-2"></i> +62 895-3425-17290</p>
                    <p><i class="fas fa-envelope me-2"></i> info@eongenesis.id</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Follow Kami</h5>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-light"><i class="fab fa-instagram fa-2x"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-facebook fa-2x"></i></a>
                        <a href="#" class="text-light"><i class="fab fa-youtube fa-2x"></i></a>
                    </div>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p>&copy; 2023 EonGenesis.id. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Inisialisasi data
            if (!localStorage.getItem('users')) {
                localStorage.setItem('users', JSON.stringify([
                    {
                        username: 'admin',
                        password: 'admin123',
                        whatsapp: '081234567890',
                        role: 'admin',
                        registeredAt: new Date().toISOString()
                    }
                ]));
            }
            
            if (!localStorage.getItem('payments')) {
                localStorage.setItem('payments', JSON.stringify([]));
            }
            
            if (!localStorage.getItem('trials')) {
                localStorage.setItem('trials', JSON.stringify([]));
            }
            
            if (!localStorage.getItem('affiliates')) {
                localStorage.setItem('affiliates', JSON.stringify([]));
            }
            
            if (!localStorage.getItem('vouchers')) {
                localStorage.setItem('vouchers', JSON.stringify([
                    { code: 'DISKON10', discount: 10, used: false }
                ]));
            }
            
            // Variabel global
            let currentUser = null;
            let isAdmin = false;
            let appliedVoucher = null;
            
            // Fungsi untuk menampilkan notifikasi
            function showAlert(message, type = 'success') {
                const alertDiv = document.createElement('div');
                alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
                alertDiv.innerHTML = `
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                `;
                
                document.querySelector('.container').prepend(alertDiv);
                
                setTimeout(() => {
                    alertDiv.remove();
                }, 5000);
            }
            
            // Fungsi untuk menampilkan section berdasarkan target
            function showSection(target) {
                document.querySelectorAll('.content-section').forEach(section => {
                    section.style.display = 'none';
                });
                
                document.querySelector(`#${target}-section`).style.display = 'block';
                
                // Jika user login, update tampilan materi berdasarkan produk yang dimiliki
                if (currentUser && !isAdmin) {
                    updateMaterialAccess();
                    updateProductBadges();
                    updateUserProducts();
                    
                    // Jika section affiliate, update data affiliate
                    if (target === 'affiliate') {
                        updateAffiliateData();
                    }
                    
                    // Jika section profile, update data profile
                    if (target === 'profile') {
                        updateProfileData();
                    }
                }
            }
            
            // Fungsi untuk update akses materi berdasarkan produk yang dimiliki
            function updateMaterialAccess() {
                const products = currentUser.products || [];
                
                // Daftar semua materi
                const materials = ['beginner', 'intermediate', 'advanced', 'ar', 'pdf'];
                
                materials.forEach(material => {
                    const materialElement = document.getElementById(`material-${material}`);
                    if (materialElement) {
                        if (products.includes(material)) {
                            materialElement.classList.remove('material-locked');
                            
                            // Update badge di produk
                            const badge = document.querySelector(`.access-badge[data-product="${material}"]`);
                            if (badge) {
                                badge.textContent = 'Akses Tersedia';
                                badge.classList.remove('access-badge');
                                badge.classList.add('paid-badge');
                            }
                        } else {
                            materialElement.classList.add('material-locked');
                            
                            // Update badge di produk
                            const badge = document.querySelector(`.access-badge[data-product="${material}"]`);
                            if (badge) {
                                badge.textContent = 'Materi Terkunci';
                                badge.classList.remove('paid-badge');
                                badge.classList.add('access-badge');
                            }
                        }
                    }
                });
            }
            
            // Fungsi untuk update badge produk
            function updateProductBadges() {
                const products = currentUser.products || [];
                
                products.forEach(product => {
                    const badge = document.querySelector(`.access-badge[data-product="${product}"]`);
                    if (badge) {
                        badge.textContent = 'Akses Tersedia';
                        badge.classList.remove('access-badge');
                        badge.classList.add('paid-badge');
                    }
                });
            }
            
            // Fungsi untuk update daftar produk user di profil
            function updateUserProducts() {
                const userProductsContainer = document.getElementById('userProducts');
                const products = currentUser.products || [];
                
                if (products.length === 0) {
                    userProductsContainer.innerHTML = '<p class="text-muted">Anda belum membeli produk apapun.</p>';
                } else {
                    let html = '<div class="list-group">';
                    
                    products.forEach(product => {
                        let productName = '';
                        switch(product) {
                            case 'beginner':
                                productName = 'Beginner Sempoa';
                                break;
                            case 'intermediate':
                                productName = 'Intermediate Sempoa';
                                break;
                            case 'advanced':
                                productName = 'Advanced Sempoa';
                                break;
                            case 'ar':
                                productName = 'Akses Link AR';
                                break;
                            case 'pdf':
                                productName = 'Materi PDF';
                                break;
                            default:
                                productName = product;
                        }
                        
                        html += `
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                ${productName}
                                <span class="paid-badge">Telah Dibeli</span>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                    userProductsContainer.innerHTML = html;
                }
            }
            
            // Fungsi untuk update data affiliate
            function updateAffiliateData() {
                if (!currentUser.affiliateCode) {
                    // Generate kode affiliate jika belum ada
                    const affiliateCode = generateAffiliateCode();
                    const users = JSON.parse(localStorage.getItem('users'));
                    const userIndex = users.findIndex(u => u.username === currentUser.username);
                    
                    users[userIndex].affiliateCode = affiliateCode;
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    currentUser.affiliateCode = affiliateCode;
                }
                
                // Tampilkan kode affiliate
                document.getElementById('userAffiliateCode').textContent = currentUser.affiliateCode;
                
                // Generate affiliate link
                const affiliateLink = `${window.location.origin}${window.location.pathname}?ref=${currentUser.affiliateCode}`;
                document.getElementById('affiliateLink').value = affiliateLink;
                
                // Hitung jumlah pengguna yang mendaftar dengan kode affiliate ini
                const users = JSON.parse(localStorage.getItem('users'));
                const affiliateUsers = users.filter(u => u.affiliatedBy === currentUser.username);
                document.getElementById('affiliateCount').textContent = affiliateUsers.length;
                
                // Hitung total komisi
                const payments = JSON.parse(localStorage.getItem('payments'));
                let totalEarnings = 0;
                let affiliateStats = '';
                
                affiliateUsers.forEach(user => {
                    const userPayments = payments.filter(p => p.username === user.username && p.status === 'verified');
                    
                    userPayments.forEach(payment => {
                        const commission = parseInt(payment.price) * 0.1; // 10% komisi
                        totalEarnings += commission;
                        
                        affiliateStats += `
                            <tr>
                                <td>${user.username}</td>
                                <td>${new Date(payment.date).toLocaleDateString('id-ID')}</td>
                                <td>Rp ${commission.toLocaleString('id-ID')}</td>
                            </tr>
                        `;
                    });
                });
                
                document.getElementById('affiliateEarnings').textContent = `Rp ${totalEarnings.toLocaleString('id-ID')}`;
                document.getElementById('affiliateStats').innerHTML = affiliateStats || '<tr><td colspan="3" class="text-center">Belum ada komisi</td></tr>';
            }
            
            // Fungsi untuk update data profil
            function updateProfileData() {
                if (currentUser.affiliateCode) {
                    document.getElementById('profileAffiliateBadge').style.display = 'block';
                    document.getElementById('affiliateInfoCard').style.display = 'block';
                    document.getElementById('affiliateCodeValue').textContent = currentUser.affiliateCode;
                    
                    // Load riwayat affiliate
                    const users = JSON.parse(localStorage.getItem('users'));
                    const payments = JSON.parse(localStorage.getItem('payments'));
                    const affiliateUsers = users.filter(u => u.affiliatedBy === currentUser.username);
                    let affiliateHistory = '';
                    
                    affiliateUsers.forEach(user => {
                        const userPayments = payments.filter(p => p.username === user.username && p.status === 'verified');
                        
                        userPayments.forEach(payment => {
                            const commission = parseInt(payment.price) * 0.1;
                            
                            affiliateHistory += `
                                <tr>
                                    <td>${user.username}</td>
                                    <td>${new Date(payment.date).toLocaleDateString('id-ID')}</td>
                                    <td>${payment.product}</td>
                                    <td>Rp ${commission.toLocaleString('id-ID')}</td>
                                </tr>
                            `;
                        });
                    });
                    
                    document.getElementById('affiliateHistory').innerHTML = affiliateHistory || '<tr><td colspan="4" class="text-center">Belum ada riwayat affiliate</td></tr>';
                    document.getElementById('affiliateHistoryCard').style.display = 'block';
                }
            }
            
            // Fungsi untuk generate kode affiliate
            function generateAffiliateCode() {
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                let code = '';
                for (let i = 0; i < 8; i++) {
                    code += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return code;
            }
            
            // Fungsi untuk login
            function loginUser(username, password) {
                const users = JSON.parse(localStorage.getItem('users'));
                const user = users.find(u => u.username === username && u.password === password);
                
                if (user) {
                    currentUser = user;
                    
                    // Cek jika admin
                    if (username === 'admin' && password === 'admin123') {
                        isAdmin = true;
                        document.getElementById('userRole').style.display = 'inline';
                        document.getElementById('userRole').textContent = 'Admin';
                        
                        // Redirect ke halaman admin (jika ada)
                        showAlert('Login admin berhasil!', 'success');
                    } else {
                        isAdmin = false;
                        
                        // Tampilkan badge affiliate jika ada
                        if (currentUser.affiliateCode) {
                            document.getElementById('userAffiliate').style.display = 'inline';
                        }
                        
                        // Tampilkan badge premium jika ada produk
                        if (user.products && user.products.length > 0) {
                            document.getElementById('userStatus').style.display = 'inline';
                            document.getElementById('profileStatusBadge').style.display = 'block';
                        }
                    }
                    
                    // Update UI setelah login
                    document.getElementById('loginFormContainer').style.display = 'none';
                    document.getElementById('userInfoContainer').style.display = 'flex';
                    document.getElementById('userName').textContent = user.username;
                    document.getElementById('userAvatar').textContent = user.username.charAt(0).toUpperCase();
                    
                    // Update profil
                    document.getElementById('profileName').textContent = user.username;
                    document.getElementById('profileWhatsapp').textContent = `WhatsApp: ${user.whatsapp}`;
                    document.getElementById('profileAvatar').textContent = user.username.charAt(0).toUpperCase();
                    
                    // Sembunyikan notifikasi login di trial modal
                    document.getElementById('trialLoginNotice').style.display = 'none';
                    
                    // Cek trial count
                    const trials = JSON.parse(localStorage.getItem('trials'));
                    const userTrials = trials.filter(t => t.username === user.username);
                    
                    if (userTrials.length < 2) {
                        document.getElementById('trialContent').style.display = 'block';
                        document.getElementById('trialCount').textContent = 2 - userTrials.length;
                        document.getElementById('trialPromo').style.display = 'none';
                    } else {
                        document.getElementById('trialLimitNotice').style.display = 'flex';
                        document.getElementById('trialContent').style.display = 'none';
                        document.getElementById('trialPromo').style.display = 'block';
                    }
                    
                    showAlert('Login berhasil!', 'success');
                    return true;
                } else {
                    showAlert('Username atau password salah!', 'danger');
                    return false;
                }
            }
            
            // Fungsi untuk logout
            function logoutUser() {
                currentUser = null;
                isAdmin = false;
                
                // Update UI setelah logout
                document.getElementById('loginFormContainer').style.display = 'block';
                document.getElementById('userInfoContainer').style.display = 'none';
                document.getElementById('userRole').style.display = 'none';
                document.getElementById('userStatus').style.display = 'none';
                document.getElementById('userAffiliate').style.display = 'none';
                
                // Reset form login
                document.getElementById('loginForm').reset();
                
                // Tampilkan notifikasi login di trial modal
                document.getElementById('trialLoginNotice').style.display = 'flex';
                document.getElementById('trialContent').style.display = 'none';
                document.getElementById('trialLimitNotice').style.display = 'none';
                document.getElementById('trialPromo').style.display = 'none';
                
                showAlert('Anda telah logout.', 'info');
            }
            
            // Event listener untuk form login
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;
                
                loginUser(username, password);
            });
            
            // Event listener untuk tombol logout
            document.getElementById('logoutBtn').addEventListener('click', logoutUser);
            
            // Event listener untuk navigasi
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update class active
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Tampilkan section yang sesuai
                    const target = this.getAttribute('data-bs-target');
                    showSection(target);
                });
            });
            
            // Event listener untuk pendaftaran
            document.getElementById('submitRegister').addEventListener('click', function() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const whatsapp = document.getElementById('whatsapp').value;
                const affiliateCode = document.getElementById('affiliateCode').value;
                
                // Validasi nomor WhatsApp
                const whatsappRegex = /^08[0-9]{9,11}$/;
                if (!whatsappRegex.test(whatsapp)) {
                    showAlert('Nomor WhatsApp harus 13 digit dan dimulai dengan 08!', 'danger');
                    return;
                }
                
                const users = JSON.parse(localStorage.getItem('users'));
                
                // Cek apakah username sudah ada
                if (users.find(u => u.username === username)) {
                    document.getElementById('usernameError').style.display = 'block';
                    return;
                } else {
                    document.getElementById('usernameError').style.display = 'none';
                }
                
                // Cek apakah WhatsApp sudah ada
                if (users.find(u => u.whatsapp === whatsapp)) {
                    document.getElementById('whatsappError').style.display = 'block';
                    return;
                } else {
                    document.getElementById('whatsappError').style.display = 'none';
                }
                
                // Cek kode affiliate jika diisi
                let affiliatedBy = null;
                if (affiliateCode) {
                    const affiliateUser = users.find(u => u.affiliateCode === affiliateCode);
                    if (!affiliateUser) {
                        document.getElementById('affiliateError').style.display = 'block';
                        return;
                    } else {
                        document.getElementById('affiliateError').style.display = 'none';
                        affiliatedBy = affiliateUser.username;
                    }
                }
                
                // Tambahkan user baru
                users.push({
                    username,
                    password,
                    whatsapp,
                    affiliatedBy,
                    products: [],
                    registeredAt: new Date().toISOString()
                });
                
                localStorage.setItem('users', JSON.stringify(users));
                
                // Tutup modal dan reset form
                const registerModal = bootstrap.Modal.getInstance(document.getElementById('registerModal'));
                registerModal.hide();
                document.getElementById('registerForm').reset();
                
                showAlert('Pendaftaran berhasil! Silakan login.', 'success');
            });
            
            // Event listener untuk tombol beli
            document.querySelectorAll('.buy-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!currentUser) {
                        showAlert('Silakan login terlebih dahulu untuk membeli produk.', 'warning');
                        return;
                    }
                    
                    const productName = this.getAttribute('data-product');
                    const productPrice = this.getAttribute('data-price');
                    const productKey = this.getAttribute('data-product-key');
                    
                    document.getElementById('paymentProductName').textContent = productName;
                    document.getElementById('paymentProductPrice').textContent = `Rp ${parseInt(productPrice).toLocaleString('id-ID')}`;
                    
                    // Simpan data produk yang dipilih di button untuk referensi nanti
                    const confirmBtn = document.getElementById('confirmPayment');
                    confirmBtn.setAttribute('data-product', productName);
                    confirmBtn.setAttribute('data-price', productPrice);
                    confirmBtn.setAttribute('data-product-key', productKey);
                    
                    // Reset voucher
                    appliedVoucher = null;
                    document.getElementById('voucherApplied').style.display = 'none';
                    document.getElementById('voucherMessage').textContent = '';
                    document.getElementById('voucherCode').value = '';
                    
                    const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
                    paymentModal.show();
                });
            });
            
            // Event listener untuk metode pembayaran
            document.querySelectorAll('.payment-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    const method = this.getAttribute('data-method');
                    document.querySelector(`#${method}Method`).checked = true;
                    
                    // Tampilkan detail sesuai metode
                    if (method === 'qris') {
                        document.getElementById('qrisCode').style.display = 'block';
                        document.getElementById('bankTransferDetails').style.display = 'none';
                    } else {
                        document.getElementById('qrisCode').style.display = 'none';
                        document.getElementById('bankTransferDetails').style.display = 'block';
                    }
                });
            });
            
            // Event listener untuk aplikasikan voucher
            document.getElementById('applyVoucher').addEventListener('click', function() {
                const voucherCode = document.getElementById('voucherCode').value;
                const vouchers = JSON.parse(localStorage.getItem('vouchers'));
                const voucher = vouchers.find(v => v.code === voucherCode && !v.used);
                
                if (voucher) {
                    appliedVoucher = voucher;
                    
                    // Hitung harga setelah diskon
                    const originalPrice = parseInt(document.getElementById('confirmPayment').getAttribute('data-price'));
                    const discountedPrice = originalPrice - (originalPrice * voucher.discount / 100);
                    
                    document.getElementById('paymentProductPrice').textContent = `Rp ${discountedPrice.toLocaleString('id-ID')}`;
                    document.getElementById('voucherApplied').style.display = 'block';
                    document.getElementById('voucherMessage').textContent = `Voucher berhasil diterapkan! Diskon ${voucher.discount}%`;
                    document.getElementById('voucherMessage').className = 'form-text text-success';
                    
                    // Update harga di tombol konfirmasi
                    document.getElementById('confirmPayment').setAttribute('data-price', discountedPrice);
                } else {
                    document.getElementById('voucherMessage').textContent = 'Kode voucher tidak valid atau sudah digunakan';
                    document.getElementById('voucherMessage').className = 'form-text text-danger';
                }
            });
            
            // Event listener untuk konfirmasi pembayaran
            document.getElementById('confirmPayment').addEventListener('click', function() {
                const productName = this.getAttribute('data-product');
                const productPrice = this.getAttribute('data-price');
                const productKey = this.getAttribute('data-product-key');
                const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
                const proofPayment = document.getElementById('proofPayment').files[0];
                
                if (!proofPayment) {
                    showAlert('Harap upload bukti pembayaran.', 'warning');
                    return;
                }
                
                // Simpan data pembayaran
                const payments = JSON.parse(localStorage.getItem('payments'));
                payments.push({
                    username: currentUser.username,
                    product: productName,
                    price: productPrice,
                    method: paymentMethod,
                    proof: URL.createObjectURL(proofPayment), // Simpan sebagai URL (hanya simulasi)
                    status: 'pending',
                    date: new Date().toISOString()
                });
                
                localStorage.setItem('payments', JSON.stringify(payments));
                
                // Tandai voucher sebagai digunakan jika ada
                if (appliedVoucher) {
                    const vouchers = JSON.parse(localStorage.getItem('vouchers'));
                    const voucherIndex = vouchers.findIndex(v => v.code === appliedVoucher.code);
                    if (voucherIndex !== -1) {
                        vouchers[voucherIndex].used = true;
                        localStorage.setItem('vouchers', JSON.stringify(vouchers));
                    }
                }
                
                // Tambahkan produk ke user jika belum ada
                if (productKey && !currentUser.products.includes(productKey)) {
                    const users = JSON.parse(localStorage.getItem('users'));
                    const userIndex = users.findIndex(u => u.username === currentUser.username);
                    
                    if (!users[userIndex].products) {
                        users[userIndex].products = [];
                    }
                    
                    users[userIndex].products.push(productKey);
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    // Update currentUser
                    currentUser = users[userIndex];
                    
                    // Update UI
                    updateMaterialAccess();
                    updateProductBadges();
                    updateUserProducts();
                    
                    // Tampilkan badge premium jika belum ada
                    if (currentUser.products && currentUser.products.length > 0) {
                        document.getElementById('userStatus').style.display = 'inline';
                        document.getElementById('profileStatusBadge').style.display = 'block';
                    }
                }
                
                // Tutup modal
                const paymentModal = bootstrap.Modal.getInstance(document.getElementById('paymentModal'));
                paymentModal.hide();
                
                showAlert('Pembayaran berhasil dikonfirmasi! Produk akan segera diaktifkan setelah verifikasi.', 'success');
                
                // Jika yang dibeli adalah Akses Link AR, redirect ke halaman AR
                if (productKey === 'ar') {
                    setTimeout(() => {
                        window.open('https://eongenesis-id.github.io/EONGENESIS/', '_blank');
                    }, 2000);
                }
            });
            
            // Event listener untuk tombol beli setelah trial habis
            document.getElementById('buyAfterTrial').addEventListener('click', function() {
                if (!currentUser) {
                    showAlert('Silakan login terlebih dahulu untuk membeli produk.', 'warning');
                    return;
                }
                
                const productName = this.getAttribute('data-product');
                const productPrice = this.getAttribute('data-price');
                
                document.getElementById('paymentProductName').textContent = productName;
                document.getElementById('paymentProductPrice').textContent = `Rp ${parseInt(productPrice).toLocaleString('id-ID')}`;
                
                document.getElementById('confirmPayment').setAttribute('data-product', productName);
                document.getElementById('confirmPayment').setAttribute('data-price', productPrice);
                document.getElementById('confirmPayment').setAttribute('data-product-key', 'ar');
                
                const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
                paymentModal.show();
            });
            
            // Event listener untuk tombol akses materi
            document.querySelectorAll('.access-material-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const productKey = this.getAttribute('data-product');
                    
                    if (!currentUser) {
                        showAlert('Silakan login terlebih dahulu untuk mengakses materi.', 'warning');
                        return;
                    }
                    
                    if (!currentUser.products || !currentUser.products.includes(productKey)) {
                        showAlert('Anda belum membeli produk ini. Silakan beli terlebih dahulu.', 'warning');
                        return;
                    }
                    
                    // Redirect ke materi berdasarkan produk
                    switch(productKey) {
                        case 'beginner':
                            window.open('https://eongenesis-id.github.io/EONGENESIS/beginner', '_blank');
                            break;
                        case 'intermediate':
                            window.open('https://eongenesis-id.github.io/EONGENESIS/intermediate', '_blank');
                            break;
                        case 'advanced':
                            window.open('https://eongenesis-id.github.io/EONGENESIS/advanced', '_blank');
                            break;
                        case 'ar':
                            window.open('https://eongenesis-id.github.io/EONGENESIS/', '_blank');
                            break;
                        case 'pdf':
                            window.open('https://eongenesis-id.github.io/EONGENESIS/pdf', '_blank');
                            break;
                    }
                });
            });
            
            // Event listener untuk tombol salin kode affiliate
            document.getElementById('copyAffiliateCode').addEventListener('click', function() {
                const code = document.getElementById('affiliateCodeValue').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    showAlert('Kode affiliate berhasil disalin!', 'success');
                });
            });
            
            document.getElementById('copyAffiliateBtn').addEventListener('click', function() {
                const code = document.getElementById('userAffiliateCode').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    showAlert('Kode affiliate berhasil disalin!', 'success');
                });
            });
            
            document.getElementById('copyAffiliateLink').addEventListener('click', function() {
                const link = document.getElementById('affiliateLink').value;
                navigator.clipboard.writeText(link).then(() => {
                    showAlert('Link affiliate berhasil disalin!', 'success');
                });
            });
            
            // Event listener untuk tombol reset admin
            document.getElementById('confirmReset').addEventListener('click', function() {
                const adminPassword = document.getElementById('adminPassword').value;
                
                if (adminPassword === 'admin123') {
                    localStorage.removeItem('users');
                    localStorage.removeItem('payments');
                    localStorage.removeItem('trials');
                    localStorage.removeItem('affiliates');
                    localStorage.removeItem('vouchers');
                    
                    // Reset ke state awal
                    localStorage.setItem('users', JSON.stringify([
                        {
                            username: 'admin',
                            password: 'admin123',
                            whatsapp: '081234567890',
                            role: 'admin',
                            registeredAt: new Date().toISOString()
                        }
                    ]));
                    localStorage.setItem('payments', JSON.stringify([]));
                    localStorage.setItem('trials', JSON.stringify([]));
                    localStorage.setItem('affiliates', JSON.stringify([]));
                    localStorage.setItem('vouchers', JSON.stringify([
                        { code: 'DISKON10', discount: 10, used: false }
                    ]));
                    
                    // Logout user jika sedang login
                    if (currentUser) {
                        logoutUser();
                    }
                    
                    const adminModal = bootstrap.Modal.getInstance(document.getElementById('adminModal'));
                    adminModal.hide();
                    
                    showAlert('Data berhasil direset!', 'success');
                } else {
                    showAlert('Password admin salah!', 'danger');
                }
            });
            
            // Cek jika admin login (username = admin)
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                const username = document.getElementById('loginUsername').value;
                
                if (username === 'admin') {
                    document.getElementById('adminResetButton').style.display = 'block';
                } else {
                    document.getElementById('adminResetButton').style.display = 'none';
                }
            });
            
            // Cek parameter referral dari URL
            const urlParams = new URLSearchParams(window.location.search);
            const refCode = urlParams.get('ref');
            if (refCode) {
                document.getElementById('affiliateCode').value = refCode;
            }
            
            // Inisialisasi
            showSection('home');
        });
    </script>
</body>
</html>
